<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Modal</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Test du Modal Actualités</h1>
      <button class="btn btn-primary" onclick="showAddNewsModal()">
        <i class="fas fa-plus"></i>
        Poster une actualité
      </button>
    </div>

    <!-- News Modal -->
    <div
      id="newsModal"
      class="modal fade"
      tabindex="-1"
      aria-labelledby="newsModalTitle"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="newsModalTitle" class="modal-title">Créer une actualité</h3>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="newsModalBody">
            <form id="newsForm">
              <!-- Hidden field for edit mode -->
              <input type="hidden" id="newsId" value="" />
              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Titre *:</label>
                  <input
                    type="text"
                    id="newsTitle"
                    class="form-control"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Catégorie *:</label>
                  <select id="newsCategory" class="form-select" required>
                    <option value="">Sélectionner une catégorie</option>
                    <option value="general">Général</option>
                    <option value="safety">Sécurité</option>
                    <option value="hr">RH</option>
                    <option value="technical">Technique</option>
                  </select>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Priorité *:</label>
                  <select id="newsPriority" class="form-select" required>
                    <option value="">Sélectionner une priorité</option>
                    <option value="normal">Normal</option>
                    <option value="important">Important</option>
                    <option value="urgent">Urgent</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Statut:</label>
                  <select id="newsStatus" class="form-select">
                    <option value="draft">Brouillon</option>
                    <option value="published">Publié</option>
                  </select>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label">Résumé:</label>
                <textarea
                  id="newsSummary"
                  class="form-control"
                  rows="2"
                  placeholder="Résumé court de l'actualité..."
                ></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Contenu *:</label>
                <textarea
                  id="newsContent"
                  class="form-control"
                  rows="6"
                  required
                  placeholder="Contenu détaillé de l'actualité..."
                ></textarea>
              </div>

              <div class="d-flex gap-2 justify-content-end">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Annuler
                </button>
                <button type="submit" class="btn btn-primary">
                  Créer l'actualité
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Show add news modal
      function showAddNewsModal() {
        document.getElementById("newsModalTitle").textContent =
          "Ajouter une actualité";
        document.getElementById("newsForm").reset();
        document.getElementById("newsId").value = "";

        // Use Bootstrap's native modal
        const modal = new bootstrap.Modal(document.getElementById("newsModal"));
        modal.show();
      }

      // Close news modal
      function closeNewsModal() {
        const modal = bootstrap.Modal.getInstance(
          document.getElementById("newsModal")
        );
        if (modal) {
          modal.hide();
        }
      }

      // News form submission
      document
        .getElementById("newsForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          alert("Formulaire soumis avec succès!");
          closeNewsModal();
        });
    </script>
  </body>
</html>
